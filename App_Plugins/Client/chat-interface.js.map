{"version":3,"file":"chat-interface.js","sources":["../../../client/src/components/chat-interface.ts"],"sourcesContent":["import { LitElement, html, css } from \"lit\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\n\r\n@customElement(\"chat-interface\")\r\nclass ChatInterface extends LitElement {\r\n  @property({ type: Array })\r\n  messages: Array<{ role: string; content: string; timestap: string }> = [];\r\n\r\n  @property({ type: String })\r\n  currentMessage: string = \"\";\r\n\r\n  @property({ type: String })\r\n  username: string = \"user\";\r\n\r\n  @property({ type: String })\r\n  Gpt: string = \"bot\";\r\n\r\n  @property({ type: String })\r\n  GptMessage: string = \"\";\r\n\r\n  constructor() {\r\n    super();\r\n    const savedMessages = localStorage.getItem(\"chat\");\r\n    console.log(savedMessages);\r\n    this.messages = savedMessages ? JSON.parse(savedMessages) : [];\r\n  }\r\n\r\n  render() {\r\n    return html`\r\n      <div class=\"hero-container\">\r\n        <div class=\"hero-background continer\">\r\n          <h2 class=\"hero-title\">scaynet</h2>\r\n          <h4 class=\"hero-sub_title\">Let Me Make Your Content</h4>\r\n          <p class=\"hero-paragraph\">\r\n            The new tool for your CMS page, let me help you and everything will\r\n            be fine.\r\n          </p>\r\n          <a><button class=\"hero-button\">try it</button></a>\r\n        </div>\r\n      </div>\r\n      <div class=\"chat-container\">\r\n        <div class=\"chat-header\">Live chat</div>\r\n        <div class=\"messages\">\r\n          ${this.messages.map((message) => {\r\n            if (message.role === \"user\") {\r\n              return html`\r\n                <div class=\"message-content\">\r\n                  <span class=\"user\">${message.role}</span>\r\n                  <div class=\"message\">\r\n                    <p>${message.content}</p>\r\n                  </div>\r\n                </div>\r\n              `;\r\n            } else if (message.role === \"bot\") {\r\n              return html`\r\n                <div class=\"messageGpt-content\">\r\n                  <span class=\"Gpt\"> ${message.role}</span>\r\n                  <div class=\"messageGpt\">\r\n                    <p>${message.content}</p>\r\n                  </div>\r\n                </div>\r\n              `;\r\n            }\r\n          })}\r\n        </div>\r\n\r\n        <div class=\"input-container\">\r\n          <input\r\n            type=\"text\"\r\n            .value=${this.currentMessage}\r\n            @input=${this._onInput}\r\n            placeholder=\"Type a message...\"\r\n          />\r\n          <button @click=${this._sendMessage}>Send</button>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  private _onInput(event: Event) {\r\n    const input = event.target as HTMLInputElement;\r\n    this.currentMessage = input.value;\r\n  }\r\n\r\n  async fetchData(historyMessages: Array<Object>) {\r\n    const theMesage = { messages: historyMessages };\r\n    try {\r\n      const response = await fetch(\r\n        \"https://localhost:44352/Chatbot/Chat\",\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: \"Bearer kIzNHctDI-RawTkWQ8t7JmEk0ogN4XTmrRu0MFcvx1E\",\r\n          },\r\n          body: JSON.stringify(theMesage),\r\n        }\r\n      );\r\n\r\n      if (!response) {\r\n        throw new Error(\"Error to send the message\");\r\n      }\r\n      const jsonData: any = await response.text();\r\n\r\n      this.messages = [\r\n        ...this.messages,\r\n        {\r\n          role: this.Gpt,\r\n          content: jsonData,\r\n          timestap: new Date().toISOString().slice(0, 19),\r\n        },\r\n      ];\r\n      localStorage.clear();\r\n      localStorage.setItem(\"chat\", JSON.stringify(this.messages));\r\n    } catch (error: any) {\r\n      this.messages = [\r\n        ...this.messages,\r\n        {\r\n          role: this.Gpt,\r\n          content: error.message,\r\n          timestap: new Date().toISOString().slice(0, 19),\r\n        },\r\n      ];\r\n    }\r\n  }\r\n\r\n  private _sendMessage() {\r\n    this.messages = [\r\n      ...this.messages,\r\n      {\r\n        role: this.username,\r\n        content: this.currentMessage,\r\n        timestap: new Date().toISOString().slice(0, 19),\r\n      },\r\n    ];\r\n    this.fetchData(this.messages);\r\n    localStorage.clear();\r\n    localStorage.setItem(\"chat\", JSON.stringify(this.messages));\r\n    this.currentMessage = \"\";\r\n  }\r\n\r\n  static styles = css`\r\n    :host {\r\n      height: 100%;\r\n      color: black;\r\n      display: flex;\r\n      width: 100%;\r\n      font-family: Arial, sans-serif;\r\n      justify-content: flex-start;\r\n      flex-direction: column;\r\n      align-items: center;\r\n    }\r\n\r\n    .hero-container {\r\n      width: 100%;\r\n      display: flex;\r\n      top: 0px;\r\n      justify-content: center;\r\n      text-align: center;\r\n      padding: 2rem;\r\n      color: #1f1f1f;\r\n      background: linear-gradient(\r\n        45deg,\r\n        #ff552a,\r\n        #eeba92,\r\n        #ff7eb9,\r\n        #f7e096,\r\n        #a8edea,\r\n        #2575fc,\r\n        #6a11cb,\r\n        #b92b27\r\n      );\r\n      background-size: 200% 200%;\r\n      animation: gradientAnimation 8s ease-in-out infinite;\r\n    }\r\n\r\n    @keyframes gradientAnimation {\r\n      0% {\r\n        background-position: 0% 50%;\r\n      }\r\n      25% {\r\n        background-position: 50% 100%;\r\n      }\r\n      50% {\r\n        background-position: 100% 50%;\r\n      }\r\n      75% {\r\n        background-position: 50% 0%;\r\n      }\r\n      100% {\r\n        background-position: 0% 50%;\r\n      }\r\n    }\r\n\r\n    .hero-title {\r\n      text-transform: uppercase;\r\n      font-size: 2rem;\r\n      margin: 10px;\r\n      font-family: sans-serif;\r\n    }\r\n\r\n    .hero-button {\r\n      width: 40%;\r\n      height: 35%;\r\n      background: rgba(255, 255, 255, 0.31);\r\n      border-radius: 3px;\r\n      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\r\n      backdrop-filter: blur(9.2px);\r\n      -webkit-backdrop-filter: blur(9.2px);\r\n      border: 0;\r\n    }\r\n\r\n    .hero-button :hover {\r\n      cursor: none;\r\n      transform: scale(1.1);\r\n    }\r\n\r\n    a {\r\n      font-weight: 500;\r\n      text-decoration: inherit;\r\n    }\r\n\r\n    .chat-container {\r\n      justify-content: center;\r\n      margin: 10px;\r\n      margin-top: 1rem;\r\n      max-width: 100%;\r\n      padding: 10px;\r\n      width: 90%;\r\n      margin: 1rem auto;\r\n      background-color: white;\r\n      border-radius: 0.5rem;\r\n      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n      overflow: hidden;\r\n    }\r\n\r\n    .chat-header {\r\n      background-color: #f3f4f6;\r\n      padding: 1rem;\r\n      font-weight: bold;\r\n      color: black;\r\n      margin-bottom: 10px;\r\n    }\r\n\r\n    .messages {\r\n      min-height: 100px;\r\n      height: auto;\r\n      max-height: 80%;\r\n      overflow-y: auto;\r\n      border-bottom: 1px solid #ccc;\r\n      margin-bottom: 10px;\r\n      /* padding-inline: 10px; */\r\n    }\r\n\r\n    .message-content{\r\n      margin-bottom: 1rem;\r\n      padding: 0.5rem 1rem;\r\n      border-radius: 1rem;\r\n      width: max-content;\r\n      max-width: 80%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      margin-left: auto;\r\n    }\r\n    .message {\r\n      margin-bottom: 1rem;\r\n      padding: 0.5rem 1rem;\r\n      border-radius: 1rem;\r\n      width: max-content;\r\n      max-width: 80%;\r\n      background-color: #3b82f6;\r\n      color: white;\r\n      display: flex;\r\n      margin-left: auto;\r\n\r\n      p {\r\n        margin: 0;\r\n      }\r\n    }\r\n\r\n    .messageGpt-content{\r\n      align-self: flex-start;\r\n    }\r\n    .messageGpt {\r\n      background-color: #f3f4f6;\r\n      align-self: flex-start;\r\n      margin-bottom: 1rem;\r\n      padding: 0.5rem 1rem;\r\n      border-radius: 1rem;\r\n      max-width: 80%;\r\n      width: max-content;\r\n      display: flex;\r\n\r\n      p {\r\n        margin: 0;\r\n      }\r\n    }\r\n    .Gpt {\r\n      font-weight: bold;\r\n      align-self: center;\r\n      margin-inline: 10px\r\n      \r\n    }\r\n    \r\n    .user {\r\n      font-weight: bold;\r\n      text-align:end;\r\n      margin-inline: 10px\r\n    }\r\n\r\n    .input-container {\r\n      display: flex;\r\n    }\r\n\r\n    input[type=\"text\"] {\r\n      flex-grow: 1;\r\n      padding: 0.5rem;\r\n      border: 1px solid #d1d5db;\r\n      border-radius: 0.375rem;\r\n      margin-right: 0.5rem;\r\n    }\r\n\r\n    button {\r\n      display: inline-block;\r\n      background-color: #3b82f6;\r\n      color: white;\r\n      padding: 0.75rem 1.5rem;\r\n      border-radius: 0.375rem;\r\n      text-decoration: none;\r\n      font-weight: bold;\r\n      transition: transform 0.3s ease, background-color 0.3s ease;\r\n      border: 0;\r\n    }\r\n\r\n    button:hover {\r\n      transform: scale(1.1);\r\n      cursor: pointer;\r\n    }\r\n  `;\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"chat-interface\": ChatInterface;\r\n  }\r\n}\r\n"],"names":["ChatInterface","LitElement","savedMessages","html","message","event","input","historyMessages","theMesage","response","jsonData","error","css","__decorateClass","property","customElement"],"mappings":"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"}